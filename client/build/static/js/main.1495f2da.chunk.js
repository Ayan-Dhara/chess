(this["webpackJsonpmy-template"]=this["webpackJsonpmy-template"]||[]).push([[0],{18:function(e,t,n){},23:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);n(23);var a=n(1),c=n.n(a),r=n(20),o=n.n(r),i=(n(28),n(3)),s=(n(29),function(){}),l=[];function u(e){s(e),l=e}var j=n(9),d=n(11),b=function(){},f=Object(d.a)(Array(8)).map((function(){return Object(d.a)(Array(8))}));function v(e){b(e),f=e}var m=function(){},O=!1;var p="move",h="status",x="board",g="connect",y="create_id",k="no_name",w="initiate",N="opponent",S="owner",C="viewer",B="closed",I="users",P="role",E="ping",W=new WebSocket("".concat(window.location.protocol.replace("http","ws"),"//").concat(window.location.hostname,":").concat("localhost"===window.location.hostname||window.location.hostname.toString().startsWith("127.0.0")?5e3:window.location.port,"/ws").concat(window.location.pathname)),F=!1;var A=function e(){var t,n=localStorage.getItem("userName"),a=localStorage.getItem("userID");if(!n)return m(t=!0),void(O=t);F?W.send(JSON.stringify({type:g,userName:n,userID:a})):setTimeout((function(){e()}),100)};W.addEventListener("open",(function(){setTimeout((function(){A()}),100)}));var D=null;function R(){return D}W.addEventListener("message",(function(e){var t={};try{t=JSON.parse(e.data)}catch(n){}T(t)}));var T=function(e){switch(e.type){case E:break;case h:switch(e.status){case k:window.location.reload();break;case B:W.close(),alert("Socket is closed");break;default:console.log("STATUS",e.status)}break;case x:u(e[x]);break;case I:break;case w:D=e[P],u(e[x]);break;case y:var t=e.userID;localStorage.setItem("userID",t),window.location.reload();break;default:console.log("Cannot identify message")}},J={K:{move:[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],castling:[[0,1],[0,-1]],type:3},Q:{move:[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],type:1},R:{move:[[-1,0],[0,-1],[0,1],[1,0]],type:1},B:{move:[[-1,-1],[-1,1],[1,-1],[1,1]],type:1},N:{move:[[-1,2],[-1,-2],[1,2],[1,-2],[-2,1],[-2,-1],[2,1],[2,-1]],type:0},P:{initial:[[-1,0],[-2,0]],move:[[-1,0]],cut:[[-1,1],[-1,-1]],type:3}},L=function(e){var t=e.target,n=1*t.dataset.i,a=1*t.dataset.j,c=t.dataset.piece;if(G(),H!==t){H=t;var r=Object(d.a)(f);r[n][a]="selected";var o=J[c[1]].move;switch(J[c[1]].type){case 0:var s,l=Object(j.a)(o);try{for(l.s();!(s=l.n()).done;){var u=Object(i.a)(s.value,2),b=u[0],m=u[1],O=n+b,p=a+m;if(O>-1&&p>-1&&O<8&&p<8){if(K(c,O,p))continue;Y(c,O,p)?r[O][p]="red":(r[O][p]="green",O+=b,p+=m)}}}catch(re){l.e(re)}finally{l.f()}break;case 1:var h,x=Object(j.a)(o);try{for(x.s();!(h=x.n()).done;)for(var g=Object(i.a)(h.value,2),y=g[0],k=g[1],w=n+y,N=a+k;w>-1&&N>-1&&w<8&&N<8&&!K(c,w,N);){if(Y(c,w,N)){r[w][N]="red";break}r[w][N]="green",w+=y,N+=k}}catch(re){x.e(re)}finally{x.f()}break;default:switch(c[1]){case"K":var S,C=Object(j.a)(o);try{for(C.s();!(S=C.n()).done;){var B=Object(i.a)(S.value,2),I=B[0],P=B[1],E=n+I,W=a+P;if(E>-1&&W>-1&&E<8&&W<8){if(K(c,E,W))continue;Y(c,E,W)?r[E][W]="red":(r[E][W]="green",E+=I,W+=P)}}}catch(re){C.e(re)}finally{C.f()}break;case"P":if(6===n){var F,A=Object(j.a)(J.P.initial);try{for(A.s();!(F=A.n()).done;){var D=Object(i.a)(F.value,2),R=D[0],T=D[1],L=n+R,Q=a+T;if(L>-1&&Q>-1&&L<8&&Q<8){if(K(c,L,Q))break;if(Y(c,L,Q))break;r[L][Q]="green"}}}catch(re){A.e(re)}finally{A.f()}}else{var U,_=Object(j.a)(J.P.move);try{for(_.s();!(U=_.n()).done;){var M=Object(i.a)(U.value,2),q=M[0],z=M[1],V=n+q,X=a+z;if(V>-1&&X>-1&&V<8&&X<8){if(K(c,V,X))continue;if(Y(c,V,X))continue;r[V][X]="green"}}}catch(re){_.e(re)}finally{_.f()}}var Z,$=Object(j.a)(J.P.cut);try{for($.s();!(Z=$.n()).done;){var ee=Object(i.a)(Z.value,2),te=ee[0],ne=ee[1],ae=n+te,ce=a+ne;ae>-1&&ce>-1&&ae<8&&ce<8&&Y(c,ae,ce)&&(r[ae][ce]="red")}}catch(re){$.e(re)}finally{$.f()}}}v(r)}else H=null},K=function(e,t,n){for(var a in l)for(var c in l[a])if(t===1*a&&n===1*c&&l[a][c][0]&&l[a][c][0]===e[0])return!0;return!1},Y=function(e,t,n){for(var a in l)for(var c in l[a])if(t===1*a&&n===1*c&&l[a][c][0]&&l[a][c][0]!==e[0])return!0;return!1},H=null,Q=function(e,t){H&&(W.send(JSON.stringify({type:p,move:{from:{x:H.dataset.i,y:H.dataset.j},to:{x:e,y:t}}})),G(),H=null)},G=function(){var e=Object(d.a)(f);for(var t in e)for(var n in e[t])e[t][n]=void 0;v(e)},U=n(0),_={BR:14,BN:16,BB:15,BQ:13,BK:12,BP:17,WR:20,WN:22,WB:21,WQ:19,WK:18,WP:23},M={};var q=function(){var e=Object(a.useState)(l),t=Object(i.a)(e,2),n=t[0],c=t[1];s=c,F=!0;var r=R(),o={};for(var u in n)for(var j in n[u])o[n[u][j]]={i:u,j:j};var d={};for(var b in M)b in o&&(d[b]=M[b]);for(var f in M=d,o)M[f]=o[f];var v=[];for(var m in M)v.push({el:m,i:M[m].i,j:M[m].j});return Object(U.jsx)(U.Fragment,{children:v.map((function(e,t){return e.el?Object(U.jsx)("div",{style:{"--i":e.i,"--j":e.j},"data-i":e.i,"data-j":e.j,"data-piece":e.el,className:"chess-piece ".concat(r===C||r===S&&"B"===e.el[0]||r===N&&"W"===e.el[0]?"read-only":""),onClick:L,children:String.fromCharCode(9800+_["".concat(e.el[0]).concat(e.el[1])])},e.el):""}))})};function z(){var e=c.a.useState(f),t=Object(i.a)(e,2),n=t[0],a=t[1];return b=a,Object(U.jsx)(U.Fragment,{children:n.map((function(e,t){return Object(U.jsx)("div",{className:"row",children:e.map((function(e,n){return e?Object(U.jsx)("div",{className:"cell ".concat(e),onClick:function(){return Q(t,n)}},n):Object(U.jsx)("div",{className:"cell",onClick:function(){return Q(t,n)}},n)}))},t)}))})}var V=function(e){return Object(U.jsxs)("div",{className:"chess-board cell",children:[Object(U.jsx)(z,{}),Object(U.jsx)(q,{})]})};function X(e){var t=e.role;t=t||"owner";var n={abc:["A","B","C","D","E","F","G","H"],cba:["H","G","F","E","D","C","B","A"],123:["1","2","3","4","5","6","7","8"],321:["8","7","6","5","4","3","2","1"]},a={owner:{classes:["top","left","bottom","right"],marks:[n.abc,n[321],n.abc,n[321]]},opponent:{classes:["top","left","bottom","right"],marks:[n.cba,n[123],n.cba,n[123]]},viewer:{classes:["top","left","bottom","right"],marks:[n.abc,n[321],n.abc,n[321]]}};return Object(U.jsx)(U.Fragment,{children:a[t].classes.map((function(e,n){return Object(U.jsx)("div",{className:e,children:a[t].marks[n].map((function(e,t){return Object(U.jsx)("div",{children:e.toUpperCase()},t)}))},n)}))})}var Z=function(){var e=Object(a.useState)(R()),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){if(!n)var e=setInterval((function(){R()&&(c(R()),clearInterval(e))}),100)}),[n]),Object(U.jsxs)("div",{className:"play-ground",children:[Object(U.jsx)(V,{}),Object(U.jsx)(X,{role:n})]})};n(18);var $=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(U.jsx)("div",{className:"popupBackground",children:Object(U.jsxs)("div",{className:"namePopup",children:[Object(U.jsx)("div",{className:"heading",children:"Enter Your Name"}),Object(U.jsx)("input",{type:"text",placeholder:"Your Name",onChange:function(e){c(e.target.value)},value:n}),Object(U.jsx)("button",{onClick:function(){localStorage.setItem("userName",n),window.location.reload()},children:"Enter Room"})]})})},ee=function(){},te=!0;var ne=function(){return Object(U.jsx)("div",{className:"popupBackground",children:Object(U.jsxs)("div",{className:"namePopup",children:[Object(U.jsxs)("div",{className:"heading",children:["Copy The Link ",Object(U.jsx)("br",{}),"And Share"]}),Object(U.jsx)("input",{type:"text",value:window.location.toString(),readOnly:!0,id:"link-to-copy"}),Object(U.jsxs)("div",{children:[Object(U.jsx)("button",{onClick:function(){var e=document.getElementById("link-to-copy");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),alert("Link copied to clipboard")},children:"Copy Link"}),"...",Object(U.jsx)("button",{onClick:function(){return ee(e=!1),void(te=e);var e},children:"Close"})]})]})})};var ae=function(){var e=Object(a.useState)(O),t=Object(i.a)(e,2),n=t[0],c=t[1];m=c;var r=Object(a.useState)(te),o=Object(i.a)(r,2),s=o[0];return function(e){ee=e}(o[1]),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Z,{}),n?Object(U.jsx)($,{}):s?Object(U.jsx)(ne,{}):""]})};n(31);var ce=function(){var e=Object(a.useState)(localStorage.getItem("userName")||""),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(U.jsx)("div",{className:"popupBackground",children:Object(U.jsxs)("div",{className:"namePopup",children:[Object(U.jsx)("div",{className:"heading",children:"Enter Your Name"}),Object(U.jsx)("input",{type:"text",placeholder:"Your Name",onChange:function(e){c(e.target.value)},value:n}),Object(U.jsx)("button",{onClick:function(){n&&(localStorage.setItem("userName",n),fetch("/room",{method:"POST"}).then((function(e){return e.json()})).then((function(e){window.location="room/".concat(e.room)})))},children:"Create Room"})]})})};var re=function(e){return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("div",{children:"Home"}),Object(U.jsx)(ce,{})]})};var oe=function(){return Object(U.jsx)("h1",{children:"404 Page NotFound"})},ie=n(21),se=n(2);var le=function(e){return Object(U.jsx)(ie.a,{children:Object(U.jsx)("div",{className:"container",children:Object(U.jsxs)(se.c,{children:[Object(U.jsx)(se.a,{path:"/",component:re,exact:!0}),Object(U.jsx)(se.a,{path:"/room/*",component:ae,exact:!0}),Object(U.jsx)(se.a,{path:"/room",component:re,exact:!0}),Object(U.jsx)(se.a,{component:oe})]})})})};o.a.render(Object(U.jsx)(c.a.StrictMode,{children:Object(U.jsx)(le,{})}),document.getElementById("root"))}},[[37,1,2]]]);