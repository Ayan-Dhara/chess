(this["webpackJsonpmy-template"]=this["webpackJsonpmy-template"]||[]).push([[0],{18:function(e,t,n){},23:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);n(23);var a=n(1),c=n.n(a),r=n(20),o=n.n(r),i=(n(28),n(4)),s=(n(29),function(){}),l=[];function u(e){s(e),l=e}var j=n(9),d=n(11),f=function(){},v=Object(d.a)(Array(8)).map((function(){return Object(d.a)(Array(8))}));function b(e){f(e),v=e}var m=function(){},O=!1;var p="move",h="status",x="board",g="connect",y="create_id",N="no_name",k="initiate",w="opponent",S="owner",C="viewer",B="closed",I="users",P="role",W="ping",E=new WebSocket("".concat(window.location.protocol.replace("http","ws"),"//").concat(window.location.hostname,":").concat("localhost"===window.location.hostname||window.location.hostname.toString().startsWith("127.0.0")?5e3:window.location.port,"/ws").concat(window.location.pathname)),F=!1;var R=function e(){var t,n=localStorage.getItem("userName"),a=localStorage.getItem("userID");if(!n)return m(t=!0),void(O=t);F?E.send(JSON.stringify({type:g,userName:n,userID:a})):setTimeout((function(){e()}),100)};E.addEventListener("open",(function(){setTimeout((function(){R()}),100)}));var T=null;E.addEventListener("message",(function(e){var t={};try{t=JSON.parse(e.data)}catch(n){}J(t)}));var J=function(e){switch(e.type){case W:break;case h:switch(e.status){case N:window.location.reload();break;case B:E.close(),alert("Socket is closed");break;default:console.log("STATUS",e.status)}break;case x:u(e[x]);break;case I:break;case k:T=e[P],u(e[x]);break;case y:var t=e.userID;localStorage.setItem("userID",t),window.location.reload();break;default:console.log("Cannot identify message")}},L={K:{move:[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],castling:[[0,1],[0,-1]],type:3},Q:{move:[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],type:1},R:{move:[[-1,0],[0,-1],[0,1],[1,0]],type:1},B:{move:[[-1,-1],[-1,1],[1,-1],[1,1]],type:1},N:{move:[[-1,2],[-1,-2],[1,2],[1,-2],[-2,1],[-2,-1],[2,1],[2,-1]],type:0},P:{initial:[[-1,0],[-2,0]],move:[[-1,0]],cut:[[-1,1],[-1,-1]],type:3}},A=function(e){var t=e.target,n=1*t.dataset.i,a=1*t.dataset.j,c=t.dataset.piece;if(U(),Y!==t){Y=t;var r=Object(d.a)(v);r[n][a]="selected";var o=L[c[1]].move;switch(L[c[1]].type){case 0:var s,l=Object(j.a)(o);try{for(l.s();!(s=l.n()).done;){var u=Object(i.a)(s.value,2),f=u[0],m=u[1],O=n+f,p=a+m;if(O>-1&&p>-1&&O<8&&p<8){if(D(c,O,p))continue;K(c,O,p)?r[O][p]="red":(r[O][p]="green",O+=f,p+=m)}}}catch(re){l.e(re)}finally{l.f()}break;case 1:var h,x=Object(j.a)(o);try{for(x.s();!(h=x.n()).done;)for(var g=Object(i.a)(h.value,2),y=g[0],N=g[1],k=n+y,w=a+N;k>-1&&w>-1&&k<8&&w<8&&!D(c,k,w);){if(K(c,k,w)){r[k][w]="red";break}r[k][w]="green",k+=y,w+=N}}catch(re){x.e(re)}finally{x.f()}break;default:switch(c[1]){case"K":var S,C=Object(j.a)(o);try{for(C.s();!(S=C.n()).done;){var B=Object(i.a)(S.value,2),I=B[0],P=B[1],W=n+I,E=a+P;if(W>-1&&E>-1&&W<8&&E<8){if(D(c,W,E))continue;K(c,W,E)?r[W][E]="red":(r[W][E]="green",W+=I,E+=P)}}}catch(re){C.e(re)}finally{C.f()}break;case"P":if(6===n){var F,R=Object(j.a)(L.P.initial);try{for(R.s();!(F=R.n()).done;){var T=Object(i.a)(F.value,2),J=T[0],A=T[1],Q=n+J,_=a+A;if(Q>-1&&_>-1&&Q<8&&_<8){if(D(c,Q,_))continue;if(K(c,Q,_))continue;r[Q][_]="green"}}}catch(re){R.e(re)}finally{R.f()}}else{var H,M=Object(j.a)(L.P.move);try{for(M.s();!(H=M.n()).done;){var q=Object(i.a)(H.value,2),z=q[0],G=q[1],V=n+z,X=a+G;if(V>-1&&X>-1&&V<8&&X<8){if(D(c,V,X))continue;if(K(c,V,X))continue;r[V][X]="green"}}}catch(re){M.e(re)}finally{M.f()}}var Z,$=Object(j.a)(L.P.cut);try{for($.s();!(Z=$.n()).done;){var ee=Object(i.a)(Z.value,2),te=ee[0],ne=ee[1],ae=n+te,ce=a+ne;ae>-1&&ce>-1&&ae<8&&ce<8&&K(c,ae,ce)&&(r[ae][ce]="red")}}catch(re){$.e(re)}finally{$.f()}}}b(r)}else Y=null},D=function(e,t,n){for(var a in l)for(var c in l[a])if(t===1*a&&n===1*c&&l[a][c][0]&&l[a][c][0]===e[0])return!0;return!1},K=function(e,t,n){for(var a in l)for(var c in l[a])if(t===1*a&&n===1*c&&l[a][c][0]&&l[a][c][0]!==e[0])return!0;return!1},Y=null,Q=function(e,t){Y&&(E.send(JSON.stringify({type:p,move:{from:{x:Y.dataset.i,y:Y.dataset.j},to:{x:e,y:t}}})),U(),Y=null)},U=function(){var e=Object(d.a)(v);for(var t in e)for(var n in e[t])e[t][n]=void 0;b(e)},_=n(0),H={BR:14,BN:16,BB:15,BQ:13,BK:12,BP:17,WR:20,WN:22,WB:21,WQ:19,WK:18,WP:23},M={};var q=function(){var e=Object(a.useState)(l),t=Object(i.a)(e,2),n=t[0],c=t[1];s=c,F=!0;var r=T,o={};for(var u in n)for(var j in n[u])o[n[u][j]]={i:u,j:j};var d={};for(var f in M)f in o&&(d[f]=M[f]);for(var v in M=d,o)M[v]=o[v];var b=[];for(var m in M)b.push({el:m,i:M[m].i,j:M[m].j});return Object(_.jsx)(_.Fragment,{children:b.map((function(e,t){return e.el?Object(_.jsx)("div",{style:{"--i":e.i,"--j":e.j},"data-i":e.i,"data-j":e.j,"data-piece":e.el,className:"chess-piece ".concat(r===C||r===S&&"B"===e.el[0]||r===w&&"W"===e.el[0]?"read-only":""),onClick:A,children:String.fromCharCode(9800+H["".concat(e.el[0]).concat(e.el[1])])},e.el):""}))})};function z(){var e=c.a.useState(v),t=Object(i.a)(e,2),n=t[0],a=t[1];return f=a,Object(_.jsx)(_.Fragment,{children:n.map((function(e,t){return Object(_.jsx)("div",{className:"row",children:e.map((function(e,n){return e?Object(_.jsx)("div",{className:"cell ".concat(e),onClick:function(){return Q(t,n)}},n):Object(_.jsx)("div",{className:"cell",onClick:function(){return Q(t,n)}},n)}))},t)}))})}var G=function(e){return Object(_.jsxs)("div",{className:"chess-board cell",children:[Object(_.jsx)(z,{}),Object(_.jsx)(q,{})]})};function V(){return Object(_.jsx)(_.Fragment,{children:[{className:"top",marks:["a","b","c","d","e","f","g","h"]},{className:"bottom",marks:["a","b","c","d","e","f","g","h"]},{className:"left",marks:["1","2","3","4","5","6","7","8"]},{className:"right",marks:["1","2","3","4","5","6","7","8"]}].map((function(e,t){return Object(_.jsx)("div",{className:e.className,children:e.marks.map((function(e,t){return Object(_.jsx)("div",{children:e.toUpperCase()},t)}))},t)}))})}var X=function(){return Object(_.jsxs)("div",{className:"play-ground",children:[Object(_.jsx)(G,{}),Object(_.jsx)(V,{})]})};n(18);var Z=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(_.jsx)("div",{className:"popupBackground",children:Object(_.jsxs)("div",{className:"namePopup",children:[Object(_.jsx)("div",{className:"heading",children:"Enter Your Name"}),Object(_.jsx)("input",{type:"text",placeholder:"Your Name",onChange:function(e){c(e.target.value)},value:n}),Object(_.jsx)("button",{onClick:function(){localStorage.setItem("userName",n),window.location.reload()},children:"Enter Room"})]})})},$=function(){},ee=!0;var te=function(){return Object(_.jsx)("div",{className:"popupBackground",children:Object(_.jsxs)("div",{className:"namePopup",children:[Object(_.jsxs)("div",{className:"heading",children:["Copy The Link ",Object(_.jsx)("br",{}),"And Share"]}),Object(_.jsx)("input",{type:"text",value:window.location.toString(),readOnly:!0,id:"link-to-copy"}),Object(_.jsxs)("div",{children:[Object(_.jsx)("button",{onClick:function(){var e=document.getElementById("link-to-copy");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),alert("Link copied to clipboard")},children:"Copy Link"}),"...",Object(_.jsx)("button",{onClick:function(){return $(e=!1),void(ee=e);var e},children:"Close"})]})]})})};var ne=function(){var e=Object(a.useState)(O),t=Object(i.a)(e,2),n=t[0],c=t[1];m=c;var r=Object(a.useState)(ee),o=Object(i.a)(r,2),s=o[0];return function(e){$=e}(o[1]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(X,{}),n?Object(_.jsx)(Z,{}):"",s?Object(_.jsx)(te,{}):""]})};n(31);var ae=function(){var e=Object(a.useState)(localStorage.getItem("userName")||""),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(_.jsx)("div",{className:"popupBackground",children:Object(_.jsxs)("div",{className:"namePopup",children:[Object(_.jsx)("div",{className:"heading",children:"Enter Your Name"}),Object(_.jsx)("input",{type:"text",placeholder:"Your Name",onChange:function(e){c(e.target.value)},value:n}),Object(_.jsx)("button",{onClick:function(){n&&(localStorage.setItem("userName",n),fetch("/room",{method:"POST"}).then((function(e){return e.json()})).then((function(e){window.location="room/".concat(e.room)})))},children:"Create Room"})]})})};var ce=function(e){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{children:"Home"}),Object(_.jsx)(ae,{})]})};var re=function(){return Object(_.jsx)("h1",{children:"404 Page NotFound"})},oe=n(21),ie=n(2);var se=function(e){return Object(_.jsx)(oe.a,{children:Object(_.jsx)("div",{className:"container",children:Object(_.jsxs)(ie.c,{children:[Object(_.jsx)(ie.a,{path:"/",component:ce,exact:!0}),Object(_.jsx)(ie.a,{path:"/room/*",component:ne,exact:!0}),Object(_.jsx)(ie.a,{path:"/room",component:ce,exact:!0}),Object(_.jsx)(ie.a,{component:re})]})})})};o.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(se,{})}),document.getElementById("root"))}},[[37,1,2]]]);